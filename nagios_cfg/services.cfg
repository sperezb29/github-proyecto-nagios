# Se define una plantilla genérica para servicios
define service{
    name                            apache-server-template         ; Nombre de la plantilla
    active_checks_enabled           1                       ; Verificaciones activas habilitadas
    passive_checks_enabled          1                       ; Verificaciones pasivas habilitadas
    parallelize_check               1                       ; Paralelizar verificaciones
    obsess_over_service             1                       ; Obsesión sobre el servicio (si Nagios es el único que lo verifica)
    check_freshness                 0                       ; No se verifica la frescura de los datos
    notifications_enabled           1                       ; Notificaciones habilitadas
    event_handler_enabled           1                       ; Manejador de eventos habilitado
    flap_detection_enabled          1                       ; Detección de 'flapping' habilitada
    failure_prediction_enabled      1                       ; Predicción de fallos habilitada
    process_perf_data               1                       ; Procesar datos de rendimiento
    retain_status_information       1                       ; Retener información de estado
    retain_nonstatus_information    1                       ; Retener información no de estado
    is_volatile                     0                       ; No es volátil (su estado no cambia aleatoriamente)
    check_period                    24x7                    ; Período de verificación
    max_check_attempts              3                       ; Número máximo de intentos antes de cambiar de estado
    normal_check_interval           5                       ; Intervalo de verificación normal (minutos)
    retry_interval                  1                       ; Intervalo de reintento (minutos)
    notification_period             24x7                    ; Período para enviar notificaciones
    notification_interval           60                      ; Intervalo entre notificaciones
    first_notification_delay        0                       ; Retraso para la primera notificación
    #contact_groups                 admins                  ; Grupo de contactos (se hereda del host o se define aquí)
    register                        0                       ; Esto es una plantilla, no un servicio real
}

# Servicios para el Servidor Apache 1
define service{
    use                     apache-server-template
    host_name               apache1_host
    service_description     Ping Check
    check_command           check_ping!100.0,20%!500.0,60%
    notifications_enabled   1
    contact_groups          admins
}

define service{
    use                     apache-server-template
    host_name               apache1_host
    service_description     HTTP Web Service
    check_command           check_http!-H apache1_host
    notifications_enabled   1
    contact_groups          admins
}

# Servicios para el Servidor Apache 2
define service{
    use                     apache-server-template
    host_name               apache2_host
    service_description     Ping Check
    check_command           check_ping!100.0,20%!500.0,60%
    notifications_enabled   1
    contact_groups          admins
}

define service{
    use                     apache-server-template
    host_name               apache2_host
    service_description     HTTP Web Service
    check_command           check_http!-H apache2_host
    notifications_enabled   1
    contact_groups          admins
}